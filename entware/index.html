<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∫–æ–Ω–∫–∏ –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º -->
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
    <link rel="manifest" href="/entware.json">
    
    <!-- –¶–≤–µ—Ç –¥–ª—è Android –∏ Windows -->
    <meta name="theme-color" content="#000000">
    <meta name="msapplication-TileColor" content="#000000">
    <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <title>–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Entware –°–∫—Ä–∏–ø—Ç–æ–≤</title>
  <style>
    :root {
      --bg-light: #f4f4f4;
      --bg-dark: #121212;
      --text-light: #333;
      --text-dark: #eee;
      --btn-bg-light: #007bff;
      --btn-bg-dark: #3399ff;
      --btn-hover-light: #0056b3;
      --btn-hover-dark: #2277dd;
      --shadow-light: rgba(0, 0, 0, 0.1);
      --shadow-dark: rgba(0, 0, 0, 0.7);
    }

    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: var(--bg-light);
      color: var(--text-light);
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      padding: 30px 20px;
      transition: background-color 0.3s, color 0.3s;
    }

    body.dark {
      background-color: var(--bg-dark);
      color: var(--text-dark);
    }

    header {
      margin-bottom: 30px;
      text-align: center;
    }

    h1 {
      font-weight: 700;
      font-size: 2rem;
      margin: 0;
    }

    nav {
      display: flex;
      flex-wrap: wrap;
      gap: 18px;
      justify-content: center;
      max-width: 600px;
      width: 100%;
    }

    button.menu-btn {
      background-color: var(--btn-bg-light);
      border: none;
      color: white;
      font-size: 1.1rem;
      padding: 14px 28px;
      border-radius: 10px;
      cursor: pointer;
      transition: background-color 0.3s;
      box-shadow: 0 6px 14px rgba(0, 123, 255, 0.5);
      min-width: 160px;
      font-weight: 600;
      user-select: none;
      flex: 1 1 160px;
      max-width: 250px;
      text-align: center;
    }

    button.menu-btn:hover {
      background-color: var(--btn-hover-light);
      box-shadow: 0 8px 18px rgba(0, 86, 179, 0.7);
    }

    body.dark button.menu-btn {
      background-color: var(--btn-bg-dark);
      box-shadow: 0 6px 14px rgba(51, 153, 255, 0.7);
    }

    body.dark button.menu-btn:hover {
      background-color: var(--btn-hover-dark);
      box-shadow: 0 8px 18px rgba(34, 119, 221, 0.9);
    }

    .theme-toggle {
      position: fixed;
      top: 20px;
      right: 20px;
      cursor: pointer;
      background: none;
      border: 2px solid currentColor;
      border-radius: 24px;
      width: 50px;
      height: 26px;
      display: flex;
      align-items: center;
      justify-content: space-around;
      padding: 0 8px;
      font-size: 18px;
      user-select: none;
      transition: border-color 0.3s, color 0.3s;
      z-index: 1000;
    }

    .theme-toggle:hover {
      border-color: #007bff;
      color: #007bff;
    }

    .theme-toggle span {
      pointer-events: none;
      user-select: none;
    }

    footer {
      margin-top: auto;
      padding: 20px 10px;
      font-size: 0.9rem;
      color: #888;
      user-select: none;
    }

    body.dark footer {
      color: #666;
    }

    @media (max-width: 480px) {
      h1 {
        font-size: 1.6rem;
      }

      button.menu-btn {
        font-size: 1rem;
        padding: 12px 20px;
        min-width: 140px;
        max-width: 100%;
      }
    }
  </style>
</head>
<body>
  <button class="theme-toggle" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É" onclick="toggleTheme()">
    <span>üåû</span><span>üåô</span>
  </button>

  <header>
    <h1>–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Entware –°–∫—Ä–∏–ø—Ç–æ–≤</h1>
    <p>–í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—ã–π –≤–∞–º —Å–∫—Ä–∏–ø—Ç –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–æ SSH –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ</p>
    <p>–ó–∞–º–æ—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –Ω–æ–≤—ã–µ —Å–≤–µ—Ä—à–µ–Ω–∏—è:</p>
    <button><a href="https://yoomoney.ru/to/410012481566554"><b><u>–Æ–º–∞–Ω–∏ –ø–æ —Å—Å—ã–ª–∫–µ</u></b></a></button>
    <button><a href="https://www.tinkoff.ru/rm/seroshtanov.aleksey9/HgzXr74936"><b><u>–¢–∏–Ω—å–∫–æ—Ñ –ø–æ —Å—Å—ã–ª–∫–µ</u></b></a></button>
  </header>

  <nav aria-label="–ú–µ–Ω—é —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–∫—Ä–∏–ø—Ç–æ–≤">
    
    <button hidden class="menu-btn" onclick="openScript('fqdn')">üì≤DNS: –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –≥—Ä—É–ø–ø—ã –æ–±—ä–µ–∫—Ç–æ–≤ FQDN</button>
    <button class="menu-btn" onclick="openScript('hydraroute')">üì≤HydraRoute Classic –∏–ª–∏ üì≤HydraRoute Neo</button>
    <button hidden class="menu-btn" onclick="openScript('hrneo')">üñ•Ô∏èHydraRoute Neo web</button>
    <button class="menu-btn" onclick="openScript('hydrarouteold')">üöÆHydraRoute Relic(–∞—Ä—Ö–∏–≤–Ω–∞—è —Å tun0)</button>
    <button class="menu-btn" onclick="openScript('neofitsb')">üÜïNeoFit SingBox WebUI vless:// ss://</button>
    <button class="menu-btn" onclick="openScript('neofitxray')">üÜïNeoFit Xray WebUI vless:// ss://</button>
    <button class="menu-btn" onclick="openScript('format_disk_web')">üñ•Ô∏èweb USB formating ext4</button>
    <button class="menu-btn" onclick="openScript('format')">üì≤terminal USB formating ext4</button>
    <button class="menu-btn" onclick="openScript('domain')">üìùDomain HydraRoute</button>
    <button class="menu-btn" onclick="openScript('awg')">‚úÖAmneziaWG WARP(awg)</button>
    <button class="menu-btn" onclick="openScript('custom')">üìäinfo banner entware</button>
    <button class="menu-btn" onclick="openScript('dns-dot-chatgpt')">üÜôDoT DNS ChatGPT</button>
    <button class="menu-btn" onclick="openScript('xray-vless')">üÜíAmneziaVPN Xray > vless</button>
    <button class="menu-btn" onclick="openScript('sing-box')">‚ößÔ∏èSing-box üì≤ hr & mt</button>
    <button class="menu-btn" onclick="openScript('neofit')">üöÆuninstall neofit</button>
    <button class="menu-btn" onclick="openScript('w4s')">üñ•Ô∏èweb4static</button>
    <button class="menu-btn" onclick="openScript('voice')">üîäds voice fix</button>
    <button hidden class="menu-btn" onclick="openScript('wg')">‚ö†Ô∏èWireGuard (wg)</button>
    <button class="menu-btn" onclick="openScript('mtskin')">üì≤MagiTrickle skin</button>
    <button class="menu-btn" onclick="openScript('mt')">üì≤MagiTrickle install</button>
    <button class="menu-btn" onclick="openScript('ipresolver')">üîçDNS ip Resolver Pro</button>
    <!-- –¢—É—Ç –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –∫–Ω–æ–ø–∫–∏ -->
  </nav>

  <footer>
    &copy; 2024 <a href='https://t.me/pegakmop'>@pegakmop</a>
  </footer>
<script>
   let tg = window.Telegram.WebApp;
   tg.expand();
</script>
  <script>
    function openScript(script) {
      // –°–æ–ø–æ—Å—Ç–∞–≤–ª—è–µ–º –∏–º—è —Å–∫—Ä–∏–ø—Ç–∞ —Å URL —Ñ–∞–π–ª–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
      const pages = {
        'sing-box': 'sing-box.html',
        'neofit': 'neofit.html',
        'neofitsb': 'neofitsb.html',
        'neofitxray': 'neofitxray.html',
        'voice': 'voice.html',
        'wg': 'wg.html',
        'fqdn': 'fqdn.html',
        'awg': 'awg.html',
        'mtskin': 'mtskin.html',
        'mt': 'mt.html',
        'domain': 'domain.html',
        'hydraroute': 'hydraroute.html',
        'hydrarouteold': 'hydrarouteold.html',
        'hrneo': 'hrneo.html',
        'w4s': 'w4s.html',
        'custom': 'custom_banner.html',
        'format_disk_web': 'format_disk_web.html',
        'format': 'format.html',
        'dns-dot-chatgpt': 'dns-dot-chatgpt.html',
        'xray': 'xray.html',
        'xray-vless': 'xray-vless.html',
        'ipresolver': 'ipresolver.html'
      };

      if (pages[script]) {
        // –û—Ç–∫—Ä—ã–≤–∞–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
        window.location.href = pages[script];
      } else {
        alert('–°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞');
      }
    }

    function toggleTheme() {
      document.body.classList.toggle('dark');
      if (document.body.classList.contains('dark')) {
        localStorage.setItem('theme', 'dark');
      } else {
        localStorage.setItem('theme', 'light');
      }
    }

    window.onload = () => {
      if (localStorage.getItem('theme') === 'dark') {
        document.body.classList.add('dark');
      }
    }
  </script>
<script>
document.addEventListener('DOMContentLoaded', () => {
    const hash = window.location.hash;
    const isStandalone = window.matchMedia('(display-mode: standalone)').matches;

    // –£—Å–ª–æ–≤–∏–µ: –µ—Å–ª–∏ –µ—Å—Ç—å hash ‚Äî –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞—Ç—å
        if (hash) {
        if (window.Telegram && Telegram.WebApp) {
            let tg = window.Telegram.WebApp;
            tg.expand();
            console.log('Telegram WebApp expanded –∏–∑-–∑–∞ –Ω–∞–ª–∏—á–∏—è hash:', hash);
        }
        return; // –Ω–µ –≤—ã–ø–æ–ª–Ω—è—Ç—å –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ (–±–∞–Ω–Ω–µ—Ä—ã –∏ —Ç.–¥.)
    }

    // –ï—Å–ª–∏ st
    //if (hash) return;

    // –£—Å–ª–æ–≤–∏–µ: –µ—Å–ª–∏ standalone (–Ω–∞–ø—Ä–∏–º–µ—Ä, PWA) ‚Äî —Ç–æ–∂–µ –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞—Ç—å
    if (isStandalone) return;

    // –î–∞–ª–µ–µ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ—Ç hash –∏ –Ω–µ standalone

    const isIOS = /iPhone|iPad|iPod/.test(navigator.userAgent) && !navigator.standalone;
    const isAndroid = /Android/.test(navigator.userAgent);

    if (isIOS) {
        const banner = `<div style="position:fixed;bottom:0;width:100%;background-color:#f8f8f8;border-top:1px solid #ddd;padding:10px;text-align:center;z-index:1000;">
            <span>–£—Å—Ç–∞–Ω–æ–≤–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ iPhone/iPad: –Ω–∞–∂–º–∏ <img src="/ios-share.svg" style="height:20px;vertical-align:middle;">, –∑–∞—Ç–µ–º <img src="/ios-add.svg" style="height:20px;vertical-align:middle;"> ¬´–ù–∞ —ç–∫—Ä–∞–Ω –î–æ–º–æ–π¬ª</span>
            <button onclick="this.parentElement.style.display='none'">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>`;
        document.body.insertAdjacentHTML('beforeend', banner);
    }

    if (isAndroid) {
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            const banner = `<div style="position:fixed;bottom:0;width:100%;background-color:#f8f8f8;border-top:1px solid #ddd;padding:10px;text-align:center;z-index:1000;">
                <span>–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω Android</span>
                <button onclick="deferredPrompt.prompt(); deferredPrompt.userChoice.then(choice => { if (choice.outcome === 'accepted') console.log('–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ'); deferredPrompt = null; });">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
                <button onclick="this.parentElement.style.display='none'">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>`;
            document.body.insertAdjacentHTML('beforeend', banner);
        });
    }

    if (!isIOS && !isAndroid) {
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            const banner = `<div style="position:fixed;bottom:0;width:100%;background-color:#f8f8f8;border-top:1px solid #ddd;padding:10px;text-align:center;z-index:1000;">
                <span>–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –¥–æ–º–∞—à–Ω–∏–π —ç–∫—Ä–∞–Ω –ü–ö</span>
                <button onclick="deferredPrompt.prompt(); deferredPrompt.userChoice.then(choice => { if (choice.outcome === 'accepted') console.log('–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ'); deferredPrompt = null; });">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
                <button onclick="this.parentElement.style.display='none'">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>`;
            document.body.insertAdjacentHTML('beforeend', banner);
        });
    }
});

// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è service worker
if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
        navigator.serviceWorker.register('/entware.js')
            .then(reg => console.log('ServiceWorker registered:', reg.scope))
            .catch(err => console.log('ServiceWorker registration failed:', err));
    });
}
</script>
</body>
</html>
